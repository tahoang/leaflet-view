!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("leaflet"),require("lodash"),require("jquery")):"function"==typeof define&&define.amd?define(["leaflet","lodash","jquery"],t):"object"==typeof exports?exports["leaflet-view"]=t(require("leaflet"),require("lodash"),require("jquery")):e["leaflet-view"]=t(e.leaflet,e.lodash,e.jquery)}(window,function(e,t,r){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=11)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t,r){(e.exports=r(4)(void 0)).push([e.i,".leaflet-cluster-anim .leaflet-marker-icon, .leaflet-cluster-anim .leaflet-marker-shadow {\r\n\t-webkit-transition: -webkit-transform 0.3s ease-out, opacity 0.3s ease-in;\r\n\t-moz-transition: -moz-transform 0.3s ease-out, opacity 0.3s ease-in;\r\n\t-o-transition: -o-transform 0.3s ease-out, opacity 0.3s ease-in;\r\n\ttransition: transform 0.3s ease-out, opacity 0.3s ease-in;\r\n}\r\n\r\n.leaflet-cluster-spider-leg {\r\n\t/* stroke-dashoffset (duration and function) should match with leaflet-marker-icon transform in order to track it exactly */\r\n\t-webkit-transition: -webkit-stroke-dashoffset 0.3s ease-out, -webkit-stroke-opacity 0.3s ease-in;\r\n\t-moz-transition: -moz-stroke-dashoffset 0.3s ease-out, -moz-stroke-opacity 0.3s ease-in;\r\n\t-o-transition: -o-stroke-dashoffset 0.3s ease-out, -o-stroke-opacity 0.3s ease-in;\r\n\ttransition: stroke-dashoffset 0.3s ease-out, stroke-opacity 0.3s ease-in;\r\n}\r\n",""])},function(e,t,r){(function(t){e.exports=function(e){var r=[];return r.toString=function(){return this.map(function(r){var n=function(e,r){var n=e[1]||"",i=e[3];if(!i)return n;if(r){var o=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+new t(JSON.stringify(e)).toString("base64")+" */"}(i),s=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(s).concat([o]).join("\n")}return[n].join("\n")}(r,e);return r[2]?"@media "+r[2]+"{"+n+"}":n}).join("")},r.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&n[s[0]]||(t&&!s[2]?s[2]=t:t&&(s[2]="("+s[2]+") and ("+t+")"),r.push(s))}},r}}).call(this,r(5).Buffer)},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(7),i=r(8),o=r(9);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return l(this,e,t,r)}function l(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,r),i=(e=a(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|d(t.length);return 0===(e=a(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?a(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t){if(h(t),e=a(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|d(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return N(e).length;default:if(n)return F(e).length;t=(""+t).toLowerCase(),n=!0}}function _(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){var o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var h=-1;for(o=r;o<a;o++)if(l(e,o)===l(t,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var c=!0,f=0;f<u;f++)if(l(e,o+f)!==l(t,f)){c=!1;break}if(c)return o}return-1}function y(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function v(e,t,r,n){return Z(F(t,e.length-r),e,r,n)}function L(e,t,r,n){return Z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function C(e,t,r,n){return L(e,t,r,n)}function w(e,t,r,n){return Z(N(t),e,r,n)}function b(e,t,r,n){return Z(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function M(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,u,l=e[i],h=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c<=r)switch(c){case 1:l<128&&(h=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(h=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&l)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,c=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=c}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=S));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return l(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return h(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return c(null,e)},u.allocUnsafeSlow=function(e){return c(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return M(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,s=r-t,a=Math.min(o,s),l=this.slice(n,i),h=e.slice(t,r),c=0;c<a;++c)if(l[c]!==h[c]){o=l[c],s=h[c];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return v(this,e,t,r);case"ascii":return L(this,e,t,r);case"latin1":case"binary":return C(this,e,t,r);case"base64":return w(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=z(e[o]);return i}function E(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function T(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function B(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function R(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function G(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(e,t,r,n,o){return o||G(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,o){return o||G(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||T(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=u.isBuffer(e)?e:F(new u(e,n).toString()),a=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function N(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(6))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=l(e),n=r[0],s=r[1],a=new o(function(e,t,r){return 3*(t+r)/4-r}(0,n,s)),u=0,h=s>0?n-4:n,c=0;c<h;c+=4)t=i[e.charCodeAt(c)]<<18|i[e.charCodeAt(c+1)]<<12|i[e.charCodeAt(c+2)]<<6|i[e.charCodeAt(c+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=255&t;2===s&&(t=i[e.charCodeAt(c)]<<2|i[e.charCodeAt(c+1)]>>4,a[u++]=255&t);1===s&&(t=i[e.charCodeAt(c)]<<10|i[e.charCodeAt(c+1)]<<4|i[e.charCodeAt(c+2)]>>2,a[u++]=t>>8&255,a[u++]=255&t);return a},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(c(e,s,s+16383>a?a:s+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function h(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function c(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(h(n));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,l=u>>1,h=-7,c=r?i-1:0,f=r?-1:1,d=e[t+c];for(c+=f,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+e[t+c],c+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+e[t+c],c+=f,h-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=l}return(d?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,l=8*o-i-1,h=(1<<l)-1,c=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=h?(a=0,s=h):s+c>=1?(a=(t*u-1)*Math.pow(2,i),s+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[r+d]=255&s,d+=p,s/=256,l-=8);e[r+d-p]|=128*_}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){!function(e,t,r){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,r=this._zoom;if(e.__parent)for(;t.__parent._zoom>=r;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):e.getLatLng?this._map?e.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e}),this):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e}),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var r,n=this._featureGroup,i=this._nonPointGroup,o=this.options.chunkedLoading,s=this.options.chunkInterval,a=this.options.chunkProgress,u=e.length,l=0,h=!0;if(this._map){var c=(new Date).getTime(),f=L.bind(function(){for(var d=(new Date).getTime();u>l;l++){if(o&&0==l%200)if((new Date).getTime()-d>s)break;if((r=e[l])instanceof L.LayerGroup)h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(r,e),u=e.length;else if(r.getLatLng){if(!this.hasLayer(r)&&(this._addLayer(r,this._maxZoom),t||this.fire("layeradd",{layer:r}),r.__parent&&2===r.__parent.getChildCount())){var p=r.__parent.getAllChildMarkers(),_=p[0]===r?p[1]:p[0];n.removeLayer(_)}}else i.addLayer(r),t||this.fire("layeradd",{layer:r})}a&&a(l,u,(new Date).getTime()-c),l===u?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(f,this.options.chunkDelay)},this);f()}else for(var d=this._needsClustering;u>l;l++)(r=e[l])instanceof L.LayerGroup?(h&&(e=e.slice(),h=!1),this._extractNonGroupLayers(r,e),u=e.length):r.getLatLng?this.hasLayer(r)||d.push(r):i.addLayer(r);return this},removeLayers:function(e){var t,r,n=e.length,i=this._featureGroup,o=this._nonPointGroup,s=!0;if(!this._map){for(t=0;n>t;t++)(r=e[t])instanceof L.LayerGroup?(s&&(e=e.slice(),s=!1),this._extractNonGroupLayers(r,e),n=e.length):(this._arraySplice(this._needsClustering,r),o.removeLayer(r),this.hasLayer(r)&&this._needsRemoving.push({layer:r,latlng:r._latlng}),this.fire("layerremove",{layer:r}));return this}if(this._unspiderfy){this._unspiderfy();var a=e.slice(),u=n;for(t=0;u>t;t++)(r=a[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(r,a),u=a.length):this._unspiderfyLayer(r)}for(t=0;n>t;t++)(r=e[t])instanceof L.LayerGroup?(s&&(e=e.slice(),s=!1),this._extractNonGroupLayers(r,e),n=e.length):r.__parent?(this._removeLayer(r,!0,!0),this.fire("layerremove",{layer:r}),i.hasLayer(r)&&(i.removeLayer(r),r.clusterShow&&r.clusterShow())):(o.removeLayer(r),this.fire("layerremove",{layer:r}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;t>=0;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var r,n,i,o=this._needsClustering.slice(),s=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(o),n=o.length-1;n>=0;n--){for(r=!0,i=s.length-1;i>=0;i--)if(s[i].layer===o[n]){r=!1;break}r&&e.call(t,o[n])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer(function(t){e.push(t)}),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer(function(r){L.stamp(r)===e&&(t=r)}),t},hasLayer:function(e){if(!e)return!1;var t,r=this._needsClustering;for(t=r.length-1;t>=0;t--)if(r[t]===e)return!0;for(t=(r=this._needsRemoving).length-1;t>=0;t--)if(r[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){"function"!=typeof t&&(t=function(){});var r=function(){!e._icon&&!e.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",r,this),this.off("animationend",r,this),e._icon?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",r,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",r,this),this.on("animationend",r,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,r,n;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,r=this._needsRemoving.length;r>t;t++)(n=this._needsRemoving[t]).newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(t=0,r=this._needsRemoving.length;r>t;t++)n=this._needsRemoving[t],this._removeLayer(n.layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),r=this._needsClustering,this._needsClustering=[],this.addLayers(r,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var r=e.length-1;r>=0;r--)if(e[r]===t)return e.splice(r,1),!0},_removeFromGridUnclustered:function(e,t){for(var r=this._map,n=this._gridUnclustered,i=this._map.getMinZoom();t>=i&&n[t].removeObject(e,r.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,r){e._latlng=t,this.removeLayer(e),e._latlng=r,this.addLayer(e)},_childMarkerDragEnd:function(e){e.target.__dragStart&&this._moveChild(e.target,e.target.__dragStart,e.target._latlng),delete e.target.__dragStart},_removeLayer:function(e,t,r){var n=this._gridClusters,i=this._gridUnclustered,o=this._featureGroup,s=this._map,a=this._map.getMinZoom();t&&this._removeFromGridUnclustered(e,this._maxZoom);var u,l=e.__parent,h=l._markers;for(this._arraySplice(h,e);l&&(l._childCount--,l._boundsNeedUpdate=!0,!(l._zoom<a));)t&&l._childCount<=1?(u=l._markers[0]===e?l._markers[1]:l._markers[0],n[l._zoom].removeObject(l,s.project(l._cLatLng,l._zoom)),i[l._zoom].addObject(u,s.project(u.getLatLng(),l._zoom)),this._arraySplice(l.__parent._childClusters,l),l.__parent._markers.push(u),u.__parent=l.__parent,l._icon&&(o.removeLayer(l),r||o.addLayer(u))):l._iconNeedsUpdate=!0,l=l.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,r){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,r)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),r=" marker-cluster-";return r+=10>t?"small":100>t?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+r,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,r=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;(t||n)&&this.on("clusterclick",this._zoomOrSpiderfy,this),r&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){for(var t=e.layer,r=t;1===r._childClusters.length;)r=r._childClusters[0];r._zoom===this._maxZoom&&r._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),e.originalEvent&&13===e.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,r=this.options.zoomToBoundsOnClick,n=this._map;(e||r)&&this.off("clusterclick",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),n.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=this._map.getMaxZoom(),t=this._map.getMinZoom(),r=this.options.maxClusterRadius,n=r;"function"!=typeof r&&(n=function(){return r}),this.options.disableClusteringAtZoom&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var i=e;i>=t;i--)this._gridClusters[i]=new L.DistanceGrid(n(i)),this._gridUnclustered[i]=new L.DistanceGrid(n(i));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var r,n,i=this._gridClusters,o=this._gridUnclustered,s=this._map.getMinZoom();for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);t>=s;t--){r=this._map.project(e.getLatLng(),t);var a=i[t].getNearObject(r);if(a)return a._addChild(e),void(e.__parent=a);if(a=o[t].getNearObject(r)){var u=a.__parent;u&&this._removeLayer(a,!1);var l=new this._markerCluster(this,t,a,e);i[t].addObject(l,this._map.project(l._cLatLng,t)),a.__parent=l,e.__parent=l;var h=l;for(n=t-1;n>u._zoom;n--)h=new this._markerCluster(this,n,h),i[n].addObject(h,this._map.project(a.getLatLng(),n));return u._addChild(h),void this._removeFromGridUnclustered(a,t)}o[t].addObject(e,r)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()})},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return t!==r&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(2===t._childCount){t._addToMap();var r=t.getAllChildMarkers();this._featureGroup.removeLayer(r[0]),this._featureGroup.removeLayer(r[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var r,n=e.getLayers(),i=0;for(t=t||[];i<n.length;i++)(r=n[i])instanceof L.LayerGroup?this._extractNonGroupLayers(r,t):t.push(r);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var r,n=this._getExpandedVisibleBounds(),i=this._featureGroup,o=this._map.getMinZoom();this._ignoreMove=!0,this._topClusterLevel._recursively(n,e,o,function(o){var s,a=o._latlng,u=o._markers;for(n.contains(a)||(a=null),o._isSingleParent()&&e+1===t?(i.removeLayer(o),o._recursivelyAddChildrenToMap(null,t,n)):(o.clusterHide(),o._recursivelyAddChildrenToMap(a,t,n)),r=u.length-1;r>=0;r--)s=u[r],n.contains(s._latlng)||i.removeLayer(s)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(n,t),i.eachLayer(function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()}),this._topClusterLevel._recursively(n,e,t,function(e){e._recursivelyRestoreChildPositions(t)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(n,e,o,function(e){i.removeLayer(e),e.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var r=this,n=this._featureGroup;n.addLayer(e),t!==e&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue(function(){n.removeLayer(e),e.clusterShow(),r._animationEnd()})):(this._forceLayout(),r._animationStart(),r._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,r){var n=this._getExpandedVisibleBounds(),i=this._map.getMinZoom();e._recursivelyAnimateChildrenInAndAddSelfToMap(n,i,t+1,r);var o=this;this._forceLayout(),e._recursivelyBecomeVisible(n,r),this._enqueue(function(){if(1===e._childCount){var s=e._markers[0];this._ignoreMove=!0,s.setLatLng(s.getLatLng()),this._ignoreMove=!1,s.clusterShow&&s.clusterShow()}else e._recursively(n,r,i,function(e){e._recursivelyRemoveChildrenFromMap(n,i,t+1)});o._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(t.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)},L.MarkerCluster=L.Marker.extend({initialize:function(e,t,r,n){L.Marker.prototype.initialize.call(this,r?r._cLatLng||r.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,r&&this._addChild(r),n&&this._addChild(n)},getAllChildMarkers:function(e){e=e||[];for(var t=this._childClusters.length-1;t>=0;t--)this._childClusters[t].getAllChildMarkers(e);for(var r=this._markers.length-1;r>=0;r--)e.push(this._markers[r]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var e,t=this._childClusters.slice(),r=this._group._map,n=r.getBoundsZoom(this._bounds),i=this._zoom+1,o=r.getZoom();t.length>0&&n>i;){i++;var s=[];for(e=0;e<t.length;e++)s=s.concat(t[e]._childClusters);t=s}n>i?this._group._map.setView(this._latlng,i):o>=n?this._group._map.setView(this._latlng,o+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,r,n,i=this._markers,o=this._childClusters,s=0,a=0,u=this._childCount;if(0!==u){for(this._resetBounds(),e=0;e<i.length;e++)r=i[e]._latlng,this._bounds.extend(r),s+=r.lat,a+=r.lng;for(e=0;e<o.length;e++)(t=o[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),r=t._wLatLng,n=t._childCount,s+=r.lat*n,a+=r.lng*n;this._latlng=this._wLatLng=new L.LatLng(s/u,a/u),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,r){this._recursively(e,this._group._map.getMinZoom(),r-1,function(e){var r,n,i=e._markers;for(r=i.length-1;r>=0;r--)(n=i[r])._icon&&(n._setPos(t),n.clusterHide())},function(e){var r,n,i=e._childClusters;for(r=i.length-1;r>=0;r--)(n=i[r])._icon&&(n._setPos(t),n.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,r,n){this._recursively(e,n,t,function(i){i._recursivelyAnimateChildrenIn(e,i._group._map.latLngToLayerPoint(i.getLatLng()).round(),r),i._isSingleParent()&&r-1===n?(i.clusterShow(),i._recursivelyRemoveChildrenFromMap(e,t,r)):i.clusterHide(),i._addToMap()})},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,function(e){e.clusterShow()})},_recursivelyAddChildrenToMap:function(e,t,r){this._recursively(r,this._group._map.getMinZoom()-1,t,function(n){if(t!==n._zoom)for(var i=n._markers.length-1;i>=0;i--){var o=n._markers[i];r.contains(o._latlng)&&(e&&(o._backupLatlng=o.getLatLng(),o.setLatLng(e),o.clusterHide&&o.clusterHide()),n._group._featureGroup.addLayer(o))}},function(t){t._addToMap(e)})},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;t>=0;t--){var r=this._markers[t];r._backupLatlng&&(r.setLatLng(r._backupLatlng),delete r._backupLatlng)}if(e-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,r,n){var i,o;this._recursively(e,t-1,r-1,function(e){for(o=e._markers.length-1;o>=0;o--)i=e._markers[o],n&&n.contains(i._latlng)||(e._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())},function(e){for(o=e._childClusters.length-1;o>=0;o--)i=e._childClusters[o],n&&n.contains(i._latlng)||(e._group._featureGroup.removeLayer(i),i.clusterShow&&i.clusterShow())})},_recursively:function(e,t,r,n,i){var o,s,a=this._childClusters,u=this._zoom;if(u>=t&&(n&&n(this),i&&u===r&&i(this)),t>u||r>u)for(o=a.length-1;o>=0;o--)s=a[o],e.intersects(s._bounds)&&s._recursively(e,t,r,n,i)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var e=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,e}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var r=this._getCoord(t.x),n=this._getCoord(t.y),i=this._grid,o=i[n]=i[n]||{},s=o[r]=o[r]||[],a=L.Util.stamp(e);this._objectPoint[a]=t,s.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var r,n,i=this._getCoord(t.x),o=this._getCoord(t.y),s=this._grid,a=s[o]=s[o]||{},u=a[i]=a[i]||[];for(delete this._objectPoint[L.Util.stamp(e)],r=0,n=u.length;n>r;r++)if(u[r]===e)return u.splice(r,1),1===n&&delete a[i],!0},eachObject:function(e,t){var r,n,i,o,s,a,u=this._grid;for(r in u)for(n in s=u[r])for(i=0,o=(a=s[n]).length;o>i;i++)e.call(t,a[i])&&(i--,o--)},getNearObject:function(e){var t,r,n,i,o,s,a,u,l=this._getCoord(e.x),h=this._getCoord(e.y),c=this._objectPoint,f=this._sqCellSize,d=null;for(t=h-1;h+1>=t;t++)if(i=this._grid[t])for(r=l-1;l+1>=r;r++)if(o=i[r])for(n=0,s=o.length;s>n;n++)a=o[n],f>(u=this._sqDist(c[L.Util.stamp(a)],e))&&(f=u,d=a);return d},_getCoord:function(e){return Math.floor(e/this._cellSize)},_sqDist:function(e,t){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n}},L.QuickHull={getDistant:function(e,t){var r=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+r*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var r,n,i,o=0,s=null,a=[];for(r=t.length-1;r>=0;r--)n=t[r],(i=this.getDistant(n,e))>0&&(a.push(n),i>o&&(o=i,s=n));return{maxPoint:s,newPoints:a}},buildConvexHull:function(e,t){var r=[],n=this.findMostDistantPointFromBaseLine(e,t);return n.maxPoint?r=(r=r.concat(this.buildConvexHull([e[0],n.maxPoint],n.newPoints))).concat(this.buildConvexHull([n.maxPoint,e[1]],n.newPoints)):[e[0]]},getConvexHull:function(e){var t,r=!1,n=!1,i=!1,o=!1,s=null,a=null,u=null,l=null,h=null,c=null;for(t=e.length-1;t>=0;t--){var f=e[t];(!1===r||f.lat>r)&&(s=f,r=f.lat),(!1===n||f.lat<n)&&(a=f,n=f.lat),(!1===i||f.lng>i)&&(u=f,i=f.lng),(!1===o||f.lng<o)&&(l=f,o=f.lng)}return n!==r?(c=a,h=s):(c=l,h=u),[].concat(this.buildConvexHull([c,h],e),this.buildConvexHull([h,c],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,r=this.getAllChildMarkers(),n=[];for(t=r.length-1;t>=0;t--)e=r[t].getLatLng(),n.push(e);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(),r=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,t.length>=this._circleSpiralSwitchover?e=this._generatePointsSpiral(t.length,r):(r.y+=10,e=this._generatePointsCircle(t.length,r)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var r,n,i=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,o=this._2PI/e,s=[];for(s.length=e,r=e-1;r>=0;r--)n=this._circleStartAngle+r*o,s[r]=new L.Point(t.x+i*Math.cos(n),t.y+i*Math.sin(n))._round();return s},_generatePointsSpiral:function(e,t){var r,n=this._group.options.spiderfyDistanceMultiplier,i=n*this._spiralLengthStart,o=n*this._spiralFootSeparation,s=n*this._spiralLengthFactor*this._2PI,a=0,u=[];for(u.length=e,r=e-1;r>=0;r--)a+=o/i+5e-4*r,u[r]=new L.Point(t.x+i*Math.cos(a),t.y+i*Math.sin(a))._round(),i+=s/a;return u},_noanimationUnspiderfy:function(){var e,t,r=this._group,n=r._map,i=r._featureGroup,o=this.getAllChildMarkers();for(r._ignoreMove=!0,this.setOpacity(1),t=o.length-1;t>=0;t--)e=o[t],i.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(n.removeLayer(e._spiderLeg),delete e._spiderLeg);r.fire("unspiderfied",{cluster:this,markers:o}),r._ignoreMove=!1,r._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var r,n,i,o,s=this._group,a=s._map,u=s._featureGroup,l=this._group.options.spiderLegPolylineOptions;for(s._ignoreMove=!0,r=0;r<e.length;r++)o=a.layerPointToLatLng(t[r]),n=e[r],i=new L.Polyline([this._latlng,o],l),a.addLayer(i),n._spiderLeg=i,n._preSpiderfyLatlng=n._latlng,n.setLatLng(o),n.setZIndexOffset&&n.setZIndexOffset(1e6),u.addLayer(n);this.setOpacity(.3),s._ignoreMove=!1,s.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var n,i,o,s,a,u,l=this,h=this._group,c=h._map,f=h._featureGroup,d=this._latlng,p=c.latLngToLayerPoint(d),_=L.Path.SVG,g=L.extend({},this._group.options.spiderLegPolylineOptions),m=g.opacity;for(m===r&&(m=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),_?(g.opacity=0,g.className=(g.className||"")+" leaflet-cluster-spider-leg"):g.opacity=m,h._ignoreMove=!0,n=0;n<e.length;n++)i=e[n],u=c.layerPointToLatLng(t[n]),o=new L.Polyline([d,u],g),c.addLayer(o),i._spiderLeg=o,_&&(a=(s=o._path).getTotalLength()+.1,s.style.strokeDasharray=a,s.style.strokeDashoffset=a),i.setZIndexOffset&&i.setZIndexOffset(1e6),i.clusterHide&&i.clusterHide(),f.addLayer(i),i._setPos&&i._setPos(p);for(h._forceLayout(),h._animationStart(),n=e.length-1;n>=0;n--)u=c.layerPointToLatLng(t[n]),(i=e[n])._preSpiderfyLatlng=i._latlng,i.setLatLng(u),i.clusterShow&&i.clusterShow(),_&&((s=(o=i._spiderLeg)._path).style.strokeDashoffset=0,o.setStyle({opacity:m}));this.setOpacity(.3),h._ignoreMove=!1,setTimeout(function(){h._animationEnd(),h.fire("spiderfied",{cluster:l,markers:e})},200)},_animationUnspiderfy:function(e){var t,r,n,i,o,s,a=this,u=this._group,l=u._map,h=u._featureGroup,c=e?l._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):l.latLngToLayerPoint(this._latlng),f=this.getAllChildMarkers(),d=L.Path.SVG;for(u._ignoreMove=!0,u._animationStart(),this.setOpacity(1),r=f.length-1;r>=0;r--)(t=f[r])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,s=!0,t._setPos&&(t._setPos(c),s=!1),t.clusterHide&&(t.clusterHide(),s=!1),s&&h.removeLayer(t),d&&(o=(i=(n=t._spiderLeg)._path).getTotalLength()+.1,i.style.strokeDashoffset=o,n.setStyle({opacity:0})));u._ignoreMove=!1,setTimeout(function(){var e=0;for(r=f.length-1;r>=0;r--)(t=f[r])._spiderLeg&&e++;for(r=f.length-1;r>=0;r--)(t=f[r])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),e>1&&h.removeLayer(t),l.removeLayer(t._spiderLeg),delete t._spiderLeg);u._animationEnd(),u.fire("unspiderfied",{cluster:a,markers:f})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,r;for(t in e)for(r=e[t].__parent;r;)r._iconNeedsUpdate=!0,r=r.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,r;for(t in e)r=e[t],this.hasLayer(r)&&r.setIcon(this._overrideMarkerIcon(r))}}),L.Marker.include({refreshIconOptions:function(e,t){var r=this.options.icon;return L.setOptions(r,e),this.setIcon(r),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}})}(window,document)},function(e,t,r){"use strict";r.r(t);r(3),r(10);var n=r(0),i=r.n(n);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,t)}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r)}(e,[{key:"zoomToExtent",value:function(e){this.map.fitBounds(new i.a.LatLngBounds(new i.a.LatLng(e.xmin,e.ymin),new i.a.LatLng(e.xmax,e.ymax)))}},{key:"zoomToFullExtent",value:function(){}},{key:"zoomToXY",value:function(e,t,r){void 0===r?this.map.setView(new i.a.LatLng(t,e),this.map.getMaxZoom()):this.map.setView(new i.a.LatLng(t,e),r)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"zoomToDataExtent",value:function(e){this.map.fitBounds(e.getBounds())}},{key:"panTo",value:function(e,t){this.map.panTo(new i.a.LatLng(t,e))}},{key:"locate",value:function(){this.map.locateAndSetView(this.map.getMaxZoom()-2)}}]),e}();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n="";n=void 0===(r=l(this,h(t).call(this,e))).minimal?"https://{s}.tiles.mapbox.com/v3/esrgc.map-y9awf40v/{z}/{x}/{y}.png":r.minimal;var o=i.a.tileLayer(n),s={"Base Map":o};r.features=new i.a.FeatureGroup([]),r.geoJsonFeatures=i.a.geoJson(),r.clusterGroup=new i.a.MarkerClusterGroup(r.clusterOptions);var a={Overlays:r.geoJsonFeatures};if(r.map=i.a.map(r.el,{layers:[o,r.features,r.geoJsonFeatures,r.clusterGroup],center:r.center||new i.a.LatLng(39,-76.7),zoom:r.zoomLevel||7,minZoom:r.minZoom||"*",maxZoom:r.maxZoom||"*",scrollWheelZoom:r.scrollZoom||!1}),console.log("Map initialized. Zoom Level: "+r.zoomLevel),void 0!==r.baseLayers)for(var u in r.baseLayers){void 0!==(c=r.baseLayers[u])&&(s[u]=c)}a={Overlays:r.geoJsonFeatures};if(void 0!==r.overlays)for(var u in r.overlays){var c=r.overlays[u];a[u]=c}return r.layerControl&&i.a.control.layers(s,a).addTo(r.map),r.scale&&i.a.control.scale().addTo(r.map),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,s),function(e,t,r){t&&u(e.prototype,t),r&&u(e,r)}(t,[{key:"getGeoJsonGroup",value:function(){return this.geoJsonFeatures}},{key:"getFeatureGroup",value:function(){return this.features}},{key:"addGeoJsonLayer",value:function(e,t){void 0!==e?(console.log("Adding data to map..."),"undefined"!=this.geoJsonFeatures&&(void 0===t?this.geoJsonFeatures.addLayer(i.a.geoJson(e)):this.geoJsonFeatures.addLayer(i.a.geoJson(e,t))),console.log("------Data added to map")):console.log("No data found")}},{key:"clearGeoJsonFeatures",value:function(){"undefined"!=this.geoJsonFeatures&&this.geoJsonFeatures.clearLayers()}},{key:"addFeatureToFeatureGroup",value:function(e){var t=this.features;void 0!==t?null!=e&&t.addLayer(e):console.log("No feature group found")}},{key:"clearFeatures",value:function(){var e=this.features;void 0!==e?e.clearLayers():console.log("No feature group found")}},{key:"createFeature",value:function(e){var t=new Wkt.Wkt;return t.read(e),t.toObject()}},{key:"createMarker",value:function(e,t,r){return i.a.marker(i.a.latLng(e,t),r)}},{key:"addClusterMarker",value:function(e){void 0!==this.clusterGroup&&this.clusterGroup.addLayer(e)}},{key:"addClusterGeoJson",value:function(e,t){if(void 0!==this.clusterGroup){var r=i.a.geoJson(e,t);this.clusterGroup.addLayer(r)}}},{key:"clearClusterMarkers",value:function(){this.clusterGroup.clearLayers()}},{key:"getClusterGroup",value:function(){return this.clusterGroup}},{key:"getFeaturesBound",value:function(){var e=this.features;if(void 0!==e)return e.getBounds();console.log("No feature group found")}},{key:"getGeoJsonFeaturesBound",value:function(){var e=this.geoJsonFeatures;if(void 0!==e)return e.getBounds();console.log("No geojson feature found")}},{key:"zoomToFeatures",value:function(){var e=this.getFeaturesBound();void 0!==e&&this.map.fitBounds(e)}},{key:"zoomToGeoJsonFeatures",value:function(){var e=this.getGeoJsonFeaturesBound();void 0!==e&&this.map.fitBounds(e)}},{key:"zoomToPoint",value:function(e,t){var r=t||this.map.getMaxZoom();if(void 0!==e.x&&void 0!==e.y){var n=new i.a.LatLng(e.y,e.x);this.map.setView(n,r)}else this.map.setView(e,r)}},{key:"pointInPolygon",value:function(e,t){for(var r=e[0],n=e[1],i=!1,o=0,s=t.length-1;o<t.length;s=o++){var a=t[o][0],u=t[o][1],l=t[s][0],h=t[s][1];u>n!=h>n&&r<(l-a)*(n-u)/(h-u)+a&&(i=!i)}return i}},{key:"getMapCenter",value:function(){return this.map.getCenter()}},{key:"Map",get:function(){return this.map}}]),t}(),d=r(1),p=r.n(d),g=r(2),m=r.n(g);function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,t),this.name="MapWrapper",void 0===this.mapData&&(this.mapData=[]),this.mapDataLoaded=!1;var r=p.a.filter(this.mapData,function(e,t){return e.selected});this.selectedLayer=r.length>0?r[0].name:"",this.selectedFeature=null,this.selectedFeatureName="",this.selectedLayers=[],void 0===this.singleSelect&&(this.singleSelect=!1),this.mapParams={},this.showMarkers=!0,this.clusterMarkerCache=[],void 0===this.autoLoad&&(this.autoLoad=!1),this.render()}return function(e,t,r){t&&y(e.prototype,t),r&&y(e,r)}(e,[{key:"render",value:function(e){this.makeMap(),this.autoLoad&&this.loadMapData(e),console.log(this.name+" has been initialized!")}},{key:"makeMap",value:function(){var e=this,t=void 0===this.center?new L.LatLng(38.3607,-75.5994):new L.LatLng(this.center.y,this.center.x);this.mapViewer=new f({el:this.el,center:t,zoomLevel:this.zoomLevel||10,minZoom:this.minZoom,maxZoom:this.maxZoom,scrollZoom:!0,clusterOptions:{showCoverageOnHover:!1,spiderfyOnMaxZoom:!0,maxClusterRadius:40,iconCreateFunction:function(e){var t=e.getChildCount(),r=" marker-cluster-";return r+=t<=5?"small":t<=10?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+r,iconSize:new L.Point(40,40)})}}}),this.mapViewer.Map.on("moveend",function(t){"function"==typeof e.onMapMoveend&&e.onMapMoveend.call(e,t)})}},{key:"loadMapData",value:function(e){var t=this,r=new Backbone.Model,n=this.mapData;if(0!=n.length){var i=0;!function o(s){void 0!==s?"layer"==s.type?(r.url=s.url,r.fetch({success:function(r){console.log("loaded map data for "+s.name);var a=r.toJSON();s.data=a,++i<n.length?o(n[i]):(t.mapDataLoaded=!0,t.showLayer(t.selectedLayer,e),"function"==typeof t.onMapLoaded&&t.onMapLoaded())}})):++i<n.length?o(n[i]):(t.mapDataLoaded=!0,t.showLayer(t.selectedLayer,e),"function"==typeof t.onMapLoaded&&t.onMapLoaded()):"function"==typeof t.onMapLoaded&&t.onMapLoaded()}(n[i])}}},{key:"showLayer",value:function(e,t){console.log("showing  layer "+e);var r=this,n=!1,i=this.getLayer(e);if(void 0!==i){r.selectedLayer=e,r.selectedFeatureName="",r.selectedFeature=null,r.selectedLayers=[];r.getGeomName();r.updateHoverText();var o=this.mapViewer,s=i.data,a=i.nameField,u=i.style,l={fillOpacity:.2},h=i.selectedStyle||{opacity:1,color:"#FCFF00",weight:4};return void 0!==t&&(t.style&&(u=t.style),t.mouseoverStyle&&(l=t.mouseoverStyle),t.selectedStyle&&(h=t.selectedStyle)),o.clearGeoJsonFeatures(),o.addGeoJsonLayer(s,{style:u,onEachFeature:function(e,t){n||(n=!0,r.mapParams.areatype=e.properties.areatype),t.on("click",function(t){var n=o.getGeoJsonGroup();p.a.each(n.getLayers(),function(e){p.a.each(e.getLayers(),function(t){e.resetStyle(t)})});for(var s=t.target,u=null,l=0;l<r.selectedLayers.length;l++){var c=r.selectedLayers[l];p.a.isEqual(s.feature.properties,c.feature.properties)&&(u=l)}if(null!=u?r.selectedLayers.splice(u,1):(1==r.singleSelect&&(r.selectedLayers=[]),r.selectedLayers.push(s)),r.selectedLayers.length>0){var f=r.selectedLayers[r.selectedLayers.length-1];r.selectedFeature=f,r.selectedFeatureName=f.feature.properties.name||f.feature.properties.region||f.feature.properties[a]||""}else r.selectedFeature=null;var d,_=null,g=[];p.a.each(r.selectedLayers,function(e){e.setStyle(h);var t=e.feature.properties;void 0!==t.areatype&&void 0!==t.areacode&&(null==_&&(_=t.areatype),g.push(t.areacode))}),d=g.length>0?{areatype:_,areacode:g.join(",")}:{areatype:_,areacode:"0"},r.mapParams=d,"function"==typeof r.onGeomSelected&&r.onGeomSelected.call(r,e,r.selectedLayers,i)}),t.on("mouseover",function(e){var t=e.target;t.setStyle(l),L.Browser.ie||L.Browser.opera||t.bringToFront();var n=e.target.feature.properties,o=n.name||n.region||n[a]||"";m()("#hoverOverlay").text(o),"function"==typeof r.onFeatureMouseover&&r.onFeatureMouseover(t,i)}),t.on("mouseout",function(e){var n=o.getGeoJsonGroup();p.a.each(n.getLayers(),function(t){t.resetStyle(e.target)}),p.a.each(r.selectedLayers,function(e){e.setStyle(h)}),r.updateHoverText(),"function"==typeof r.onFeatureMouseout&&r.onFeatureMouseout(t,i)})}}),o.getGeoJsonGroup()}}},{key:"getLayer",value:function(e){for(var t in this.mapData){var r=this.mapData[t];if(r.name==e)return r}}},{key:"addZoomToExtent",value:function(e){var t=this;void 0===e&&(e='<i class="fa fa-globe"></i>'),m()("div.leaflet-top.leaflet-left .leaflet-control-zoom-in").after([' <a class="leaflet-control-zoom-out" id="zoomToExtent"',' href="#" title="Zoom to Full-extent">',e,"</a>"].join("")),m()("#zoomToExtent").on("click",function(e){return t.mapViewer.zoomToGeoJsonFeatures(),"function"==typeof t.onZoomToExtent&&t.onZoomToExtent(t.mapViewer),!1})}},{key:"mapControlClick",value:function(e){var t=e.currentTarget,r=m()(t).attr("data-name");console.log("map layer "+r+" control clicked"),this.showLayer(r),this.$(t).parent().find('i[role="checkbox"]').remove(),m()(t).find("p").append('<i class="fa fa-check" role="checkbox"></i>'),"function"==typeof this.onLayerChanged&&this.onLayerChanged.call(this,r)}},{key:"getGeomName",value:function(){return this.selectedLayers.length>1?"Multi Areas":null==this.selectedFeature?"Statewide":this.selectedLayer+" "+this.selectedFeatureName}},{key:"updateHoverText",value:function(){var e=this.getGeomName();m()("#hoverOverlay").text(e)}},{key:"getCurrentParams",value:function(){var e=null,t=[];return p.a.each(this.selectedLayers,function(r){var n=r.feature.properties;void 0!==n.areatype&&void 0!==n.areacode&&(null==e&&(e=n.areatype),t.push(n.areacode))}),t.length>0?{areatype:e,areacode:t.join(",")}:{areatype:e,areacode:"0"}}},{key:"selectGeom",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NAME",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this,o=this.mapViewer.getGeoJsonGroup(),s=t||{fillOpacity:.5};p.a.each(e,function(e){var t=null;o.getLayers()[0].eachLayer(function(n){void 0!==(t=n.feature)&&t.properties[r].toString().toLowerCase()==e.toLowerCase()&&(n.setStyle(s),i.selectedFeature=n,i.selectedFeatureName=e,i.selectedLayers.push(n))}),i.updateHoverText(),"function"==typeof i.onGeomSelected&&n&&i.onGeomSelected.call(i,null,i.selectedLayers)})}},{key:"addClusterMarkers",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",n=arguments.length>3?arguments[3]:void 0,i=this.mapViewer;if(i.clearClusterMarkers(),void 0===e?e=this.clusterMarkerCache:this.clusterMarkerCache=e,0!=e.length){if(this.showMarkers)return"json"==r?p.a.each(e,function(e){var r=void 0===t?e.template:t,n=i.createMarker(e.y_coord,e.x_coord,{});n.bindPopup(r,{}),i.addClusterMarker(n)}):"geojson"==r?i.addClusterGeoJson(e,{onEachFeature:function(e,r){var i=e.properties;"string"==typeof t?r.bindPopup(L.Util.template(t,i)):"function"==typeof t&&r.bindPopup(t(i)),"function"==typeof n&&r.on("click",n)}}):console.log('Not supported data type. Use "geojson/json"'),this.clusterGroup}else console.log("Can not add cluster markers. Data is empty.")}},{key:"clearClusterMarkers",value:function(){this.mapViewer.clearClusterMarkers()}},{key:"setShowMarkers",value:function(e){this.showMarkers=e,e?this.addClusterMarkers():this.clearClusterMarkers()}},{key:"zoomToLocation",value:function(e,t,r){var n=r||14;this.mapViewer.zoomToPoint({x:e,y:t},n)}},{key:"setMapClickMode",value:function(e){"single"==e?this.singleSelect=!0:"multi"==e?this.singleSelect=!1:this.singleSelect?console.log("Map click mode is: Single selection"):console.log("Map click mode is: Multi selection")}},{key:"getMapCenter",value:function(){return this.mapViewer.getMapCenter()}},{key:"Map",get:function(){return this.mapViewer.Map}}]),e}();function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this._thematicObj={fieldName:"",currentClassification:"equalInterval",classRanges:{quantile:null,equalInterval:null},numClasses:6,themes:{green:["#f4f8fa","#dffbdb","#c0fbbb","#a1f69b","#83f980","#68f964"],red:["#f5f7fa","#f5dadd","#f5bdc0","#f5a1a4","#f58487","#f5686b"],blue:["#f4f7fb","#d7dafb","#babdfb","#9ea1fb","#8184fb","#6568fb"],yellow:["#f5f8fa","#f5f8dd","#f5f8c0","#f5f8a4","#f5f887","#f5f86b"],heatMap:["#FEF0D9","#FDCC8A","#FC8D59","#E34A33","#B30000","#6F0505"]},currentTheme:null,opacity:.8},this.setFieldName(t),this.setColorTheme("green")}return function(e,t,r){t&&C(e.prototype,t),r&&C(e,r)}(e,[{key:"setNumOfClasses",value:function(e){isFinite(e)?this._thematicObj.numClasses=e:console.log("Thematic renderer could not set number of classes to "+e)}},{key:"setCustomColorTheme",value:function(e){this._thematicObj.themes[e.name]=e.colors,this.setColorTheme(e.name)}},{key:"setOpacity",value:function(e){this._thematicObj.opacity=e,this.redraw()}},{key:"setFieldName",value:function(e){this._thematicObj.fieldName=e}},{key:"setColorTheme",value:function(e){void 0!==e&&(this._thematicObj.currentTheme=this._thematicObj.themes[e],this.redraw())}},{key:"setClassification",value:function(e){this._thematicObj.currentClassification=e,this.redraw()}},{key:"getColorIndex",value:function(e,t){for(var r=this._thematicObj.numClasses-1,n=0;n<this._thematicObj.numClasses-1;n++)if(Number(e)>=Number(t[n])&&Number(e)<Number(t[n+1])){r=n;break}return r}},{key:"getColorString",value:function(e){if(0==e)return"#DCDCDC";var t=this._thematicObj.classRanges[this._thematicObj.currentClassification];if(void 0!==t){var r=this.getColorIndex(e,t);return this._thematicObj.currentTheme[r]}}},{key:"getOpacity",value:function(){return this._thematicObj.opacity}},{key:"calculateThematicRanges",value:function(e){if(void 0===this._thematicObj)return!1;var t=this._thematicObj.fieldName;if(""==t)return console.log("CalculateThematicRanges: fieldName is required to calculate ranges"),!1;var r=[];for(l in e){var n=e[l],i=Math.round(100*n[t])/100;isNaN(i)&&(i=0),r.push(i)}r.length<this._thematicObj.numClasses&&(this._thematicObj.numClasses=r.length);var o=r[0],s=_.max(r)-o,a=[];a.push(o);for(var u=Math.ceil(r.length/this._thematicObj.numClasses),l=u;l<r.length;l+=u)a.push(r[l]);var h=[],c=Math.ceil(s/this._thematicObj.numClasses),f=Math.floor(o);h.push(f);for(l=1;l<this._thematicObj.numClasses;l++)f+=c,h.push(Math.ceil(f));return this._thematicObj.classRanges.quantile=a,this._thematicObj.classRanges.equalInterval=h,this._thematicObj.calculated=!0,!0}},{key:"redraw",value:function(){}},{key:"getLegendData",value:function(e,t){if(void 0===t&&(t=this._thematicObj.currentClassification),"function"!=typeof e&&(e=function(e){return e}),this._thematicObj.calculated){var r=this,n=this._thematicObj.classRanges[t];if(void 0!==n){var i=_.map(n,function(t,i){var o="";return o=void 0===n[i+1]?e(t)+" or greater":[e(t)," - ",e(n[i+1])].join(""),0==t&&(t+=.01),{color:r.getColorString(t),label:o}});return i=i.reverse()}console.log("Range data is undefined")}else console.log("Data has not been calculated. Legend can not be generated.")}},{key:"thematicObj",get:function(){return this._thematicObj}}]),e}();r.d(t,"Choropleth",function(){return w}),r.d(t,"LeafletWrapper",function(){return v})}])});